@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  /* Hide scrollbar but maintain functionality */
  .no-scrollbar {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
  }
  
  .no-scrollbar::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }
  
  /* For chat scroll hiding */
  .scrollbar-hide {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }
}

@layer base {
  :root {
    /* Dark Mode Colors (Default) */
    --bg-main: #0e0f10;
    --bg-panel: #1c1d1f;
    --text-main: #e0e0e0;
    --text-muted: #94a3b8;
    --border-color-rgb: 255,255,255; /* For use with alpha, e.g., border-border-color/8 */
    --border-color: rgba(var(--border-color-rgb), 0.08);
    --hover-glass-rgb: 255,255,255;
    --hover-glass: rgba(var(--hover-glass-rgb), 0.04);
    --error-color: #ff6b6b;
    --primary-rgb: 0, 191, 166; /* Ocean Teal RGB */
    --primary: rgb(var(--primary-rgb));
    --primary-foreground: #ffffff;
    --primary-hover-rgb: 0, 167, 148;
    --primary-hover: rgb(var(--primary-hover-rgb));

    /* Default existing theme variables (will be overridden by dark/light theme) */
    --background: var(--bg-main); 
    --foreground: var(--text-main);
    --card: var(--bg-panel);
    --card-foreground: var(--text-main);
    --popover: var(--bg-panel);
    --popover-foreground: var(--text-main);
    
    --primary-hsl: 173 100% 37%; /* Corresponds to #00bfa6 */
    --primary-foreground-hsl: 0 0% 100%;
    
    --secondary-hsl: 210 40% 96.1%; 
    --secondary-foreground-hsl: 222.2 47.4% 11.2%;
    
    --muted-hsl: 220 10% 12%; /* Derived from bg-panel #1c1d1f */
    --muted-foreground-hsl: 220 10% 60%; /* Derived from text-muted #94a3b8 */

    --accent-hsl: var(--primary-hsl);
    --accent-foreground-hsl: var(--primary-foreground-hsl);

    --destructive-hsl: 0 84.2% 60.2%;
    --destructive-foreground-hsl: 0 0% 98%;

    --border-hsl: 220 13% 15%; /* Rough equivalent of rgba(255,255,255,0.08) on dark bg */
    --input-hsl: var(--border-hsl);
    --ring-hsl: var(--primary-hsl);
    
    --radius: 0.75rem; /* Updated to match rounded-xl/2xl consistency */
    
    /* RGB values for CSS variables */
    --chat-accent-light-rgb: 77, 144, 222; /* Fallback for RGB usage */
  }

  .dark {
    /* Dark Mode Colors are already default via :root */
  }

  html.light {
    --bg-main: #f9fafb;
    --bg-panel: #ffffff;
    --text-main: #1e293b;
    --text-muted: #64748b;
    --border-color-rgb: 226,232,240; /* For #e2e8f0 */
    --border-color: rgb(var(--border-color-rgb));
    --hover-glass-rgb: 0,0,0;
    --hover-glass: rgba(var(--hover-glass-rgb), 0.02);
    /* --primary, --primary-foreground, --primary-hover, --error-color remain same */
    
    --background: var(--bg-main);
    --foreground: var(--text-main);
    --card: var(--bg-panel);
    --card-foreground: var(--text-main);
    --popover: var(--bg-panel);
    --popover-foreground: var(--text-main);
    
    --secondary-hsl: 210 40% 96.1%; 
    --secondary-foreground-hsl: 222.2 47.4% 11.2%;
    
    --muted-hsl: 210 40% 96.1%; /* Light muted, e.g. bg-gray-100 */
    --muted-foreground-hsl: 215 20% 45.1%; /* text-slate-600, for #64748b */

    --border-hsl: 214 32% 91%; /* For #e2e8f0 */
    --input-hsl: var(--border-hsl);
  }

  body {
    @apply bg-background text-foreground font-sans tracking-wide;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  /* Theme transition for smooth dark/light mode switching */
  .theme-transition {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
  }
  
  .theme-transition * {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
  }
}

@layer base {
  /* This body rule is redundant as it's defined above. Removing it. */
  /*
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
  */
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-muted/20;
}

::-webkit-scrollbar-thumb {
  @apply bg-muted rounded-full hover:bg-muted-foreground/50 transition-colors;
}

/* Focus styles */
:focus-visible {
  @apply outline-none ring-2 ring-accent/50 ring-offset-2 ring-offset-background;
}

/* Selection styles */
::selection {
  @apply bg-accent/30 text-foreground;
}

/* Markdown content styling */
.markdown {
  @apply text-foreground leading-relaxed;
}

.markdown p {
  @apply mb-4;
}

.markdown h1 {
  @apply text-2xl font-bold mb-6 pb-2 border-b border-border;
}

.markdown h2 {
  @apply text-xl font-bold mt-8 mb-4;
}

.markdown h3 {
  @apply text-lg font-bold mt-6 mb-3;
}

.markdown code {
  @apply px-1.5 py-0.5 bg-secondary rounded text-sm font-mono;
}

.markdown pre {
  @apply p-4 bg-secondary rounded-lg my-4 overflow-x-auto;
}

.markdown pre code {
  @apply bg-transparent p-0 text-sm leading-relaxed;
}

.markdown ul {
  @apply list-disc ml-6 mb-4;
}

.markdown ol {
  @apply list-decimal ml-6 mb-4;
}

.markdown li {
  @apply mb-1;
}

.markdown blockquote {
  @apply pl-4 border-l-2 border-accent/50 italic my-4;
}

.markdown a {
  @apply text-accent hover:underline;
}

.markdown table {
  @apply w-full border-collapse mb-4;
}

.markdown th, .markdown td {
  @apply border border-border p-2;
}

.markdown th {
  @apply bg-muted font-medium;
}

html, body {
  @apply antialiased;
  scroll-behavior: smooth;
}

@layer base {
  /* Add gradient background to dark mode */
  .dark body {
    background: linear-gradient(to bottom, hsl(222 47% 7%), hsl(222 47% 3%));
    background-attachment: fixed;
  }
  
  /* Add subtle dot pattern to dark mode */
  .dark main {
    background-image: radial-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px);
    background-size: 50px 50px;
  }
  
  h1, h2, h3, h4, h5, h6 {
    @apply font-heading;
  }
  input, textarea, select {
    @apply transition-all duration-200;
  }
  button {
    @apply transition-all duration-200;
  }
}

@layer components {
  .font-heading {
    font-family: 'Outfit', ui-sans-serif, system-ui;
  }
  
  .container {
    @apply max-w-[1200px] mx-auto px-4;
  }
  
  .btn {
    @apply inline-flex items-center justify-center rounded-lg px-6 py-3 font-medium transition-all duration-200;
  }
  
  .btn-primary {
    @apply bg-primary text-primary-foreground px-4 py-2 rounded-xl hover:bg-primary-hover shadow-md transition-all ease-in-out duration-200;
    @apply focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background;
  }
  
  .btn-secondary {
    @apply bg-hover-glass text-primary px-4 py-2 rounded-xl transition-all ease-in-out duration-200;
    @apply hover:bg-white/20 dark:bg-white/10 dark:hover:bg-white/20; /* Ensure dark mode specifics */
    @apply focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background;
  }
  
  .card {
    @apply rounded-xl bg-card p-6 shadow-[0_8px_30px_rgba(0,0,0,0.12)] hover:shadow-[0_8px_30px_rgba(0,0,0,0.18)] transition-all duration-200;
  }
  
  .glass-card {
    @apply relative backdrop-blur-md bg-card/60 border border-border;
  }
  
  .glass-card.gradient::before {
    content: '';
    @apply absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-accent rounded-t-md z-0;
  }
  
  .glass-card.glow::after {
    content: '';
    @apply absolute -inset-px bg-gradient-to-r from-blue-500 via-purple-500 to-accent rounded-xl opacity-50 blur-md -z-10;
  }
  
  .premium-gradient {
    @apply bg-gradient-to-r from-violet-600 to-indigo-600;
  }
  
  .premium-text-gradient {
    @apply text-primary font-semibold;
  }
  
  .dashboard-card {
    @apply bg-card border border-border rounded-xl p-6 shadow-[0_8px_30px_rgba(0,0,0,0.12)] hover:shadow-[0_8px_30px_rgba(0,0,0,0.18)] transition-all duration-200;
  }
  
  .glow-effect {
    @apply relative;
  }
  
  .glow-effect::after {
    @apply content-[''] absolute inset-0 rounded-xl bg-gradient-to-r from-violet-600/20 to-indigo-600/20 opacity-0 blur-xl transition-all duration-300;
  }
  
  .glow-effect:hover::after {
    @apply opacity-100;
  }
  
  /* Custom scrollbar styles */
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background-color: rgba(255, 255, 255, 0.2);
  }
  
  /* Form controls */
  .input-themed {
    @apply bg-card border border-border text-foreground rounded-md px-3 py-2 text-sm;
    @apply focus:ring-1 focus:ring-primary focus:border-primary outline-none;
    @apply placeholder:text-muted-foreground/60;
  }
  
  .input-premium {
    @apply bg-card border border-border text-foreground rounded-lg px-3 py-2 text-sm shadow-sm;
    @apply focus:ring-1 focus:ring-primary focus:border-primary outline-none;
    @apply placeholder:text-text-muted/60 transition-all duration-200;
  }

  /* Chat input styles */
  .chat-input-container {
    @apply relative rounded-2xl border border-border bg-background shadow-sm transition-all duration-200 hover:shadow-md;
  }

  .chat-input-container:focus-within {
    @apply border-[hsl(var(--chat-accent-light))]/50 shadow-md;
    box-shadow: 0 0 0 1px rgba(77, 144, 222, 0.3), 0 2px 10px rgba(0, 0, 0, 0.1);
  }

  .chat-action-chip {
    @apply text-xs rounded-full px-3 py-1 transition-colors flex items-center gap-1.5;
  }

  .chat-action-chip-primary {
    @apply bg-[hsl(var(--chat-accent-light))]/10 text-[hsl(var(--chat-accent-light))] 
           hover:bg-[hsl(var(--chat-accent-light))]/20;
  }

  .chat-action-chip-secondary {
    @apply bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] 
           hover:bg-[hsl(var(--secondary))]/90;
  }

  .chat-send-button {
    @apply flex items-center justify-center rounded-full p-2.5
           bg-[hsl(var(--chat-accent-light))] text-[hsl(var(--chat-accent-foreground-light))] 
           transition-all hover:bg-[hsl(var(--chat-accent-light))]/90 shadow-md
           hover:shadow-lg scale-100 hover:scale-105
           disabled:opacity-60 disabled:pointer-events-none disabled:shadow-none disabled:scale-100;
  }

  .chat-textarea {
    @apply w-full bg-transparent border-0 resize-none text-sm 
           text-[hsl(var(--foreground))] placeholder:text-[hsl(var(--muted-foreground))] 
           focus:outline-none focus:ring-0
           min-h-[60px] max-h-[180px] py-0 px-0 no-scrollbar;
  }

  /* General Container Style from Meta-Prompt */
  .themed-container {
    @apply bg-card rounded-2xl border border-border shadow-xl backdrop-blur-md;
    @apply hover:ring-1 hover:ring-primary/20 transition-all;
  }
} 

/* Animation classes */
.animate-fade-in {
  animation: fadeIn 0.3s ease-in-out forwards;
}

.animate-slide-up {
  animation: slideUp 0.5s ease-out forwards;
}

.animate-slide-right {
  animation: slideRight 0.5s ease-out forwards;
}

/* Keyframes for animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { transform: translateY(20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes slideRight {
  from { transform: translateX(-20px); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

/* Chat bubble styles */
.chat-bubble-user {
  @apply bg-secondary text-foreground rounded-xl px-4 py-3 max-w-[90%] break-words;
}

.chat-bubble-assistant {
  @apply bg-accent/10 text-foreground rounded-xl px-4 py-3 max-w-[90%] break-words;
}

/* Markdown styling */
.markdown-content h1 {
  @apply text-2xl font-bold mb-4;
}

.markdown-content h2 {
  @apply text-xl font-bold mb-3 mt-6;
}

.markdown-content h3 {
  @apply text-lg font-bold mb-2 mt-5;
}

.markdown-content p {
  @apply mb-4;
}

.markdown-content ul, 
.markdown-content ol {
  @apply mb-4 pl-5;
}

.markdown-content ul {
  @apply list-disc;
}

.markdown-content ol {
  @apply list-decimal;
}

.markdown-content li {
  @apply mb-1;
}

.markdown-content pre {
  @apply bg-card-foreground/10 p-3 rounded-lg mb-4 overflow-x-auto;
}

.markdown-content code {
  @apply font-mono bg-card-foreground/10 px-1 py-0.5 rounded text-sm;
}

.markdown-content pre code {
  @apply bg-transparent p-0;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.animate-spin {
  animation: spin 1s linear infinite;
}

/* Loading dots animation */
.dots-loader {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
}

.dots-loader .dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background-color: currentColor;
  opacity: 0.6;
}

.dots-loader .dot:nth-child(1) {
  animation: dot-fade 1.5s 0s infinite ease-in-out;
}

.dots-loader .dot:nth-child(2) {
  animation: dot-fade 1.5s 0.5s infinite ease-in-out;
}

.dots-loader .dot:nth-child(3) {
  animation: dot-fade 1.5s 1s infinite ease-in-out;
}

@keyframes dot-fade {
  0%, 100% {
    opacity: 0.6;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.3);
  }
}

/* Animation for typing indicator */
.animate-pulse-slow {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}
.animate-pulse-slow.delay-75 {
  animation-delay: 0.75s;
}
.animate-pulse-slow.delay-150 {
  animation-delay: 1.5s;
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.3;
  }
}

/* Chat message styling */
.prose-accent {
  @apply prose prose-sm;
  color: hsl(var(--foreground));
}

.prose-accent a {
  color: hsl(var(--primary-hsl));
  text-decoration: none;
}
.prose-accent a:hover {
  color: hsl(var(--primary-hsl)); /* Use a slightly different hover color if desired, e.g. primary-hover */
  text-decoration: underline;
}

.prose-accent code {
  background-color: hsla(var(--primary-hsl), 0.1);
  color: hsl(var(--primary-hsl));
  @apply px-1 py-0.5 rounded-sm text-xs font-mono;
}

.prose-accent pre {
  background-color: hsl(var(--card));
  color: hsl(var(--card-foreground));
  @apply p-3 rounded-md my-2 overflow-x-auto;
}

.prose-accent pre code {
  background-color: transparent;
  color: inherit; /* Inherits from pre's color */
  @apply p-0;
}

/* Custom chat input shadow */
.chat-input-top-shadow {
  box-shadow: 0 -2px 8px -2px hsla(var(--primary-hsl), 0.3), 0 1px 3px -1px hsla(var(--primary-hsl), 0.15) !important;
}

.dark .chat-input-top-shadow {
  box-shadow: 0 -2px 8px -2px hsla(var(--primary-hsl), 0.4), 0 1px 3px -1px hsla(var(--primary-hsl), 0.2) !important;
} 